{% extends "base.html" %}
{% block title %}Sales{% endblock %}
{% block content %}
<h2>Record Sale</h2>
<form method="POST">
    <div class="mb-3">
        <label>Customer</label>
        <select name="customer_id" class="form-control" required>
            {% for c in customers %}
                <option value="{{ c[0] }}">{{ c[1] }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="mb-3">
        <label>Payment Method</label>
        <select name="payment_method" class="form-control">
            <option value="Cash">Cash</option>
            <option value="Card">Card</option>
        </select>
    </div>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Product</th><th>Price</th><th>Available Qty</th><th>Quantity to Sell</th>
            </tr>
        </thead>
        <tbody>
            {% for p in products %}
            <tr>
                <td>{{ p[1] }}</td>
                <td>{{ p[2] }}</td>
                <td>{{ p[3] }}</td>
                <td><input type="number" name="quantity_{{ p[0] }}" min="0" max="{{ p[3] }}" class="form-control" value="0"></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="row mb-3">
        <div class="col">
            <label>Discount</label>
            <input type="number" name="discount" step="0.01" class="form-control" value="0">
        </div>
        <div class="col">
            <label>Tax</label>
            <input type="number" name="tax" step="0.01" class="form-control" value="0">
        </div>
    </div>

    <button type="submit" class="btn btn-success">Record Sale</button>
</form>
{% endblock %}
